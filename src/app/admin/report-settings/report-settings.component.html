<nb-card class="main-card" [nbSpinner]="isLoading"
         nbSpinnerSize="giant" nbSpinnerStatus="primary">
  <nb-card-header *ngIf="pageLoaded">
    <div class="d-flex">
      <div class="d-flex w-100 align-items-center justify-content-center">
        Настройка публикации отчетов
      </div>
      <button nbButton status="success" [routerLink]="'/admin'">Назад</button>
    </div>
    <hr>
    <div class="d-flex justify-content-between align-items-center overflow-auto">
      <div class="mr-2">
        Дата недели <br><br>
        <button nbButton size="small" (click)="choseDates(dateDialog)">Выбрать день недели</button>
      </div>
      <div class="mr-2">
        <div class="mb-3">Автоотправка</div>
        <nb-toggle (change)="changed()" [(ngModel)]="report.autoSending" status="primary"></nb-toggle>
      </div>
      <div class="mr-2">
        Отчет отправится через 8 часов
        <br>
        <div class="d-flex justify-content-between">
          <div>
            <button nbButton>{{expirationTime?.day}}</button>
            <br>
            Дней
          </div>
          <div>
            <button nbButton>{{expirationTime?.hour}}</button>
            <br>
            Часов
          </div>
          <div>
            <button nbButton>{{expirationTime?.minute}}</button>
            <br>
            Минут
          </div>
          <div>
            <button nbButton>{{expirationTime?.second}}</button>
            <br>
            Секунд
          </div>
        </div>
      </div>
      <div class="mr-2">
        <button class="header-buttons" (click)="openMatClassifier(report)" nbButton>Фильтр по материалам</button>
      </div>
      <div class="mr-2">
        <button class="header-buttons" [routerLink]="'/admin/recipients/' + report.id" nbButton>Получатели</button>
      </div>
      <div>
        <button class="header-buttons" *ngIf="report.isSending" nbButton status='danger'>Остановить публикацию
        </button>
        <button class="header-buttons" *ngIf="!report.isSending" nbButton status="primary">Восстановить публикацию
        </button>
      </div>

    </div>

  </nb-card-header>
  <nb-card-body>
    <!--    <ngx-pdf-view></ngx-pdf-view>-->
    <!--    <div class="pdf-viewer row">-->
    <!--      <div class="col-7">-->
    <!--        <pdf-viewer [src]="pdfSrc"-->
    <!--                    [render-text]="true"-->
    <!--                    style="display: block;"-->
    <!--                    [(page)]="page"-->
    <!--                    [stick-to-page]="true"-->
    <!--                    (after-load-complete)="afterLoadComplete($event)"-->
    <!--        ></pdf-viewer>-->
    <!--      </div>-->
    <!--      <div class="col-5 pdf-small-pages">-->
    <!--        <div class="row">-->
    <!--          <div class="page-col-class col-4" *ngFor="let pdfPage of pdfPagesList">-->
    <!--            <pdf-viewer [src]="pdfSrc"-->
    <!--                        (click)="goToPdfPage(pdfPage)"-->
    <!--                        [render-text]="true"-->
    <!--                        [show-all]="false"-->
    <!--                        class="pdf-small-page-view"-->
    <!--                        [page]="pdfPage.pageNumber"-->
    <!--                        [zoom]="0.2"-->
    <!--                        style="display: block;"-->
    <!--            ></pdf-viewer>-->

    <!--            <span class="page-number">{{pdfPage.pageNumber}}</span>-->
    <!--          </div>-->
    <!--        </div>-->
    <!--      </div>-->

    <!--    </div>-->
    <div class="wrapper">
      <div class="box">
        <pdf-viewer [src]="pdfSrc"
                    [render-text]="true"
                    style="display: block;"
                    [(page)]="page"
                    [stick-to-page]="true"
                    (after-load-complete)="afterLoadComplete($event)"
        ></pdf-viewer>
      </div>
      <div class="handler"></div>
      <div class="boxB" style="width: 40%">
        <div class="row d-flex justify-content-between">
          <div class="page-col-class" *ngFor="let pdfPage of pdfPagesList">
            <pdf-viewer [src]="pdfSrc"
                        (click)="goToPdfPage(pdfPage)"
                        [render-text]="true"
                        [show-all]="false"
                        class="pdf-small-page-view"
                        [page]="pdfPage.pageNumber"
                        [zoom]="0.2"
                        style="display: block;"
            ></pdf-viewer>

            <span class="page-number">{{pdfPage.pageNumber}}</span>
          </div>
        </div>
      </div>
    </div>
  </nb-card-body>

</nb-card>

<div class="test-class"></div>
<ng-template #dateDialog let-data let-ref="dialogRef">
  <nb-card class="chose-date-card">
    <nb-card-body>
      <div class="d-flex justify-content-end">
        <button nbButton ghost>
          <nb-icon (click)="cancelTime(ref)" icon="close-outline"></nb-icon>
        </button>
      </div>
      <div class="row justify-content-between">
        <nb-select [(ngModel)]="reportHours">
          <nb-option *ngFor="let hour of hoursList" value="{{hour}}">{{hour}}</nb-option>
        </nb-select>
        <span class="d-flex align-items-center">:</span>
        <nb-select [(ngModel)]="reportMinutes">
          <nb-option *ngFor="let minute of minutesList" value="{{minute}}">{{minute}}</nb-option>
        </nb-select>

        <button *ngIf="report.generateInMonday" (click)="report.generateInMonday = false" nbButton status="primary">ПН
        </button>
        <button *ngIf="!report.generateInMonday" (click)="report.generateInMonday = true" nbButton>ПН</button>
        <button *ngIf="report.generateInTuesday" (click)="report.generateInTuesday = false" nbButton status="primary">ВТ
        </button>
        <button *ngIf="!report.generateInTuesday" (click)="report.generateInTuesday = true" nbButton>ВТ</button>
        <button *ngIf="report.generateInWednesday" (click)="report.generateInWednesday = false" nbButton
                status="primary">СР
        </button>
        <button *ngIf="!report.generateInWednesday" (click)="report.generateInWednesday = true" nbButton>СР</button>
        <button *ngIf="report.generateInThursday" (click)="report.generateInThursday = false" nbButton status="primary">
          ЧТ
        </button>
        <button *ngIf="!report.generateInThursday" (click)="report.generateInThursday = true" nbButton>ЧТ</button>
        <button *ngIf="report.generateInFriday" (click)="report.generateInFriday = false" nbButton status="primary">ПТ
        </button>
        <button *ngIf="!report.generateInFriday" (click)="report.generateInFriday = true" nbButton>ПТ</button>
        <button *ngIf="report.generateInSaturday" (click)="report.generateInSaturday = false" nbButton status="primary">
          СБ
        </button>
        <button *ngIf="!report.generateInSaturday" (click)="report.generateInSaturday = true" nbButton>СБ</button>
        <button *ngIf="report.generateInSunday" (click)="report.generateInSunday = false" nbButton status="primary">ВС
        </button>
        <button *ngIf="!report.generateInSunday" (click)="report.generateInSunday = true" nbButton>ВС</button>
      </div>
    </nb-card-body>
    <nb-card-footer class="d-flex justify-content-around">
      <button nbButton (click)="changeGenerateDays(ref)" status="primary">Применить</button>
      <button nbButton (click)="cancelTime(ref)">Отменить</button>
    </nb-card-footer>
  </nb-card>
</ng-template>

