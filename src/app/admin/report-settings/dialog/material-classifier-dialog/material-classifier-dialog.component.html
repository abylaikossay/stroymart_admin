<nb-card class="bg-white">
  <nb-card-header class="addition-info-header d-flex justify-content-between">
    Классификатор материалов
    <button (click)="closeDialog()" ghost nbButton>
      <nb-icon icon="close-outline"></nb-icon>
    </button>
  </nb-card-header>
  <nb-card-body class="classifier-card-body">
    <div class="d-flex justify-content-between">
      <div class="d-flex justify-content-start">
        <div class="select-div">
          <nb-select (selectedChange)="changeOtdel($event)" fullWidth placeholder="Отдел">
            <nb-option class="d-flex justify-content-between" *ngFor="let otdel of otdels" [value]="otdel">
              <div>{{otdel?.mcName}}</div>
              <div>{{otdel?.mcCount}}</div>
            </nb-option>
          </nb-select>
        </div>
        <div class="select-div" *ngIf="rasdels.length > 0">
          <nb-select (selectedChange)="changeRasdel($event)" fullWidth placeholder="Раздел">
            <nb-option class="d-flex justify-content-between" *ngFor="let rasdel of rasdels" [value]="rasdel">
              <div>{{rasdel?.mcName}}</div>
              <div>{{rasdel?.mcCount}}</div>
            </nb-option>
          </nb-select>
        </div>
        <div class="select-div" *ngIf="podrasdels.length > 0">
          <nb-select (selectedChange)="changePodrazdel($event)" fullWidth placeholder="Подраздел">
            <nb-option class="d-flex justify-content-between" *ngFor="let otdel of podrasdels" [value]="otdel">
              <div>{{otdel?.mcName}}</div>
              <div>{{otdel?.mcCount}}</div>
            </nb-option>
          </nb-select>
        </div>
        <div class="select-div" *ngIf="gruppas.length > 0">
          <nb-select (selectedChange)="changeGruppa($event)" fullWidth placeholder="Группа">
            <nb-option class="d-flex justify-content-between" *ngFor="let otdel of gruppas" [value]="otdel">
              <div>{{otdel?.mcName}}</div>
              <div>{{otdel?.mcCount}}</div>
            </nb-option>
          </nb-select>
        </div>
        <div class="select-div" *ngIf="podgruppas.length > 0">
          <nb-select (selectedChange)="changePodgruppa($event)" fullWidth placeholder="Подгруппа">
            <nb-option class="d-flex justify-content-between" *ngFor="let otdel of podgruppas" [value]="otdel">
              <div>{{otdel?.mcName}}</div>
              <div>{{otdel?.mcCount}}</div>
            </nb-option>
          </nb-select>
        </div>
      </div>
      <button [disabled]="!chosenMaterial" (click)="openMaterialsDialog()" style="width: 190px" nbButton
              status="primary"
              class="d-flex justify-content-between">
        <div>Материалы</div>
        <div class="total-count-buton">{{totalCount}}</div>
      </button>
    </div>
  </nb-card-body>
  <nb-card-footer>
    <div class="d-flex justify-content-between">
      <div class="border-right-custom">
        <div class="mb-2">Выбранные материалы</div>
        <button (click)="clearFilter()" nbButton outline status="primary">
          Очистить фильтр
        </button>
      </div>
      <div class="main-materials-div d-flex justify-content-start">
        <div *ngFor="let material of materials; let i = index" class="button-height-div">
          <button nbTooltip="{{material.mtName}}"  class="material-button" nbButton outline status="primary">
            {{material.mtName}}
          </button>
          <button nbButton status="primary" outline class="remove-material-icon">
            <nb-icon (click)="removeFromList(material, i)" class="close-icon" icon="close-outline"></nb-icon>
          </button>
        </div>
      </div>
      <div class="border-left-custom">
        <div class="row mb-2">
          <button [disabled]="materials.length === 0" (click)="submitMaterials()" nbButton status="primary">Применить
          </button>
        </div>
        <div class="row">
          <button nbButton outline status="primary" (click)="closeDialog()">Отменить</button>
        </div>
      </div>
    </div>
  </nb-card-footer>
</nb-card>
